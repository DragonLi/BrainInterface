<UserControl x:Class="Abt.Controls.SciChart.Example.Examples.IWantTo.ZoomAndPanAChart.SynchronizeMouseAcrossCharts"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:s="http://schemas.abtsoftware.co.uk/scichart"
        xmlns:common="clr-namespace:Abt.Controls.SciChart.Example.Common">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="32"></RowDefinition>
            <RowDefinition Height="*"></RowDefinition>
            <RowDefinition Height="*"></RowDefinition>
        </Grid.RowDefinitions>

        <!-- Define Toolbar -->
        <StackPanel Grid.Row="0" Orientation="Horizontal">
            <ToggleButton Content="Zoom" Margin="3" IsChecked="{Binding ZoomEnabled, Mode=TwoWay}"></ToggleButton>
            <TextBlock Text="or" Foreground="#EEE" Margin="3,8"></TextBlock>
            <ToggleButton Content="Pan" Margin="3" IsChecked="{Binding PanEnabled, Mode=TwoWay}"></ToggleButton>
            <Line Margin="3,1,3,1" VerticalAlignment="Stretch" Stroke="#EEE" StrokeThickness="1" X1="0" X2="0" Y1="6" Y2="25"></Line>
            <ToggleButton Content="MouseWheel" Margin="3" IsChecked="{Binding MouseWheelEnabled, Mode=TwoWay}"></ToggleButton>
            <Line Margin="3,1,3,1" VerticalAlignment="Stretch" Stroke="#EEE" StrokeThickness="1" X1="0" X2="0" Y1="6" Y2="25"></Line>
            <ToggleButton Content="Rollover" Margin="3" IsChecked="{Binding RolloverEnabled, Mode=TwoWay}"></ToggleButton>
            <TextBlock Text="or" Foreground="#EEE" Margin="3,8"></TextBlock>
            <ToggleButton Content="Cursor" Margin="3" IsChecked="{Binding CursorEnabled, Mode=TwoWay}"></ToggleButton>
            <Line Margin="3,1,3,1" VerticalAlignment="Stretch" Stroke="#EEE" StrokeThickness="1" X1="0" X2="0" Y1="6" Y2="25"></Line>
            <Button Margin="3" Content="Zoom Extents" Click="ZoomExtentsClick"></Button>
        </StackPanel>

        <!-- Define Chart 0 -->
        <s:SciChartSurface x:Name="chart0" Grid.Row="1" s:ThemeManager.Theme="Chrome" >
            <s:SciChartSurface.RenderableSeries>
                <s:FastLineRenderableSeries SeriesColor="DarkBlue" DataSeries="{Binding ChartData0}"/>
            </s:SciChartSurface.RenderableSeries>

            <!-- Define X and Y Axis. Optional bands give a cool look and feel for minimal performance impact  -->
            <s:SciChartSurface.YAxis>
                <s:NumericAxis VisibleRange="0,1" GrowBy="0.1,0.1" MinorsPerMajor="2" />
            </s:SciChartSurface.YAxis>
            <s:SciChartSurface.XAxis>
                <s:NumericAxis VisibleRange="{Binding SharedXVisibleRange, Mode=TwoWay}" GrowBy="0.1,0.1"  MinorsPerMajor="4" DrawMajorBands="True" />
            </s:SciChartSurface.XAxis>
            <s:SciChartSurface.ChartModifier>
                
                <!-- Whats going on here? -->
                <!-- We share the mouse events by using MouseManager.MouseEventGroup="..." -->
                <!-- We ensure modifiers receive events even when another has handled by setting ReceiveHandledEvents=true -->
                <!-- We bind both charts XAxis to shared property on the viewmodel to ensure they stay in sync -->
                <s:ModifierGroup s:MouseManager.MouseEventGroup="myCustomGroup">
                    <s:RubberBandXyZoomModifier ReceiveHandledEvents="True" IsEnabled="{Binding ZoomEnabled, Mode=TwoWay}" IsXAxisOnly="True" />
                    <s:ZoomPanModifier ReceiveHandledEvents="True" IsEnabled="{Binding PanEnabled, Mode=TwoWay}" />
                    <s:MouseWheelZoomModifier IsEnabled="{Binding MouseWheelEnabled, Mode=TwoWay}" />
                    <s:RolloverModifier ReceiveHandledEvents="True" IsEnabled="{Binding RolloverEnabled, Mode=TwoWay}" />
                    <s:CursorModifier ReceiveHandledEvents="True" IsEnabled="{Binding CursorEnabled, Mode=TwoWay}" />
                    <s:YAxisDragModifier Tag="FirstYAxis" />
                    <s:XAxisDragModifier />
                    <s:ZoomExtentsModifier />
                </s:ModifierGroup>
            </s:SciChartSurface.ChartModifier>
        </s:SciChartSurface>

        <!-- Define Chart 1 -->
        <s:SciChartSurface x:Name="chart1" Grid.Row="2" s:ThemeManager.Theme="Chrome">
            <s:SciChartSurface.RenderableSeries>
                <s:FastLineRenderableSeries SeriesColor="DarkBlue" DataSeries="{Binding ChartData1}"/>
            </s:SciChartSurface.RenderableSeries>

            <!-- Define X and Y axis. Optional bands give a cool look and feel for minimal performance impact  -->
            <s:SciChartSurface.YAxis>
                <s:NumericAxis VisibleRange="0,1" GrowBy="0.1,0.1" MinorsPerMajor="2" />
            </s:SciChartSurface.YAxis>
            <s:SciChartSurface.XAxis>
                <s:NumericAxis VisibleRange="{Binding SharedXVisibleRange, Mode=TwoWay}" GrowBy="0.1,0.1"  MinorsPerMajor="4" DrawMajorBands="True"/>
            </s:SciChartSurface.XAxis>
            <s:SciChartSurface.ChartModifier>
                <s:ModifierGroup s:MouseManager.MouseEventGroup="myCustomGroup">
                    <s:RubberBandXyZoomModifier Tag="SecondYAxis" ReceiveHandledEvents="True" IsEnabled="{Binding ZoomEnabled, Mode=TwoWay}" IsXAxisOnly="True"></s:RubberBandXyZoomModifier>
                    <s:ZoomPanModifier Tag="SecondYAxis" ReceiveHandledEvents="True" IsEnabled="{Binding PanEnabled, Mode=TwoWay}" />
                    <s:MouseWheelZoomModifier Tag="SecondYAxis" IsEnabled="{Binding MouseWheelEnabled, Mode=TwoWay}" />
                    <s:RolloverModifier Tag="SecondYAxis" ReceiveHandledEvents="True" IsEnabled="{Binding RolloverEnabled, Mode=TwoWay}" />
                    <s:CursorModifier Tag="SecondYAxis" ReceiveHandledEvents="True" IsEnabled="{Binding CursorEnabled, Mode=TwoWay}" />
                    <s:YAxisDragModifier Tag="SecondYAxis" />
                    <s:XAxisDragModifier Tag="SecondYAxis" />
                    <s:ZoomExtentsModifier Tag="SecondYAxis" />
                </s:ModifierGroup>
            </s:SciChartSurface.ChartModifier>

        </s:SciChartSurface>

    </Grid>
</UserControl>
